dist: bionic
language: node_js
node_js:
- '12'
branches:
  only:
  - master
services:
- docker
addons:
  apt:
    packages:
    - docker-ce
before_install:
- mkdir -p ~/.local/bin
- curl -fsSL -o ~/.local/bin/dash-network https://raw.github.com/dashpay/dash-network-deploy/master/bin/dash-network
  && chmod +x ~/.local/bin/dash-network
- git clone https://$NETWORK_CONFIGS_GITHUB_USERNAME:$NETWORK_CONFIGS_GITHUB_TOKEN@github.com/nmarley/dash-network-configs
  ~/dash-network-configs
- cp ~/dash-network-configs/$NETWORK_CONFIGS_PATH/.env.example ~/dash-network-configs/$NETWORK_CONFIGS_PATH/.env
install:
- npm ci
script:
- cd ~/dash-network-configs/$NETWORK_CONFIGS_PATH
- "~/.local/bin/dash-network test $DEVNET"
- cd $TRAVIS_BUILD_DIR
- npm run test
notifications:
  slack:
    secure: WgGGYwUDHJS0WQ9Z68/qdekKijWSM4CPnlzL+DMhN7Ge3mN7lgkNdbpdTRQv+y15VKWITB0xV/wwoJR2hyxckdKh/Oy2Yq17lufzt2gaP+hCWBI+IZluO/GrFBYnZT0tuqIOHPt6DDqNX3ZHiIu8zCDdPGdjXC3N3cHiOFOCGOB9FZy/4WThf30B1BcBFL3uV8vjGyPDMIfDqUt/WJvOs+1FurhbYgUXBIxAYbXQXlriCppHFWeS7AnuyHzilRkDWBDvXkEy7fwetvn2FJwMZeAYfp3gUUUSr8DURDuj53iepJsOurdJl6Gs0/EOJbzaGNI0jfZ5dYsTNDYwG6psgreTORSGv95IFm8/gelAfSHLVwj5iSyV14ZauQLjpO1e5z/wMIt8EyS8YZaCNEYh+FwkagAxV0htuD57S7crYUgQ6MnJN7BjAUoKTrLLJY03Bj6+GThFLXUi564UqGXiG84nTTrffsbr3XRvxmIuudf+nu8a+xH7Erbg0u7/fIVHBx3upZ5kjq2KwnAYyX6BcYgnXEDorem/5SsZaXJEmQC3bw+8q+ZR2WsJStKIs9mHKXCv3nYVl1m4KjOLTHUR2VWZE2nKMWeLQbAQgmLa+9/K5yE6wPdCn1ZK02wlh2+C9/gwEXtn9vkdrOKl2ovL0qCrs96PWQhFfwr19YX6nvc=
