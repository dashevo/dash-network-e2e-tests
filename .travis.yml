dist: bionic
language: node_js
node_js:
- '12'
branches:
  only:
  - master
services:
- docker
addons:
  apt:
    packages:
    - docker-ce
before_install:
- mkdir -p ~/.local/bin
- curl -fsSL -o ~/.local/bin/dash-network https://raw.github.com/dashpay/dash-network-deploy/master/bin/dash-network
  && chmod +x ~/.local/bin/dash-network
- git clone https://$NETWORK_CONFIGS_GITHUB_USERNAME:$NETWORK_CONFIGS_GITHUB_TOKEN@github.com/nmarley/dash-network-configs
  ~/dash-network-configs
- cp ~/dash-network-configs/$NETWORK_CONFIGS_PATH/.env.example ~/dash-network-configs/$NETWORK_CONFIGS_PATH/.env
install:
- npm ci
script:
- cd ~/dash-network-configs/$NETWORK_CONFIGS_PATH
- "~/.local/bin/dash-network test $DEVNET"
- cd $TRAVIS_BUILD_DIR
- npm run test
notifications:
  slack:
    rooms:
      - secure: qftaOpkkXLyBqLK6wQ2mFBsGGSjFhGY05mb5ur5+ZYrgghHqiyDFyQ8BhpJ2l/euTfO6Zl4O/p+I8Bg96uqLfMngec/mS6upKUvbZhdBIrCpchVNQMjm82LBFj06vCQ3ushxmpeEpNyHgARUUJTvw774wHV4lElh3VfevTcWtuyBJfsvFx3eqiYhDVycUopBIHNb5wwDwj20usgqMiQDMnR758XpCdDgGIzchRy+Hei0iJlSeDJkT3IxNY9wJ222vhWZUpjKYb7D9QCK+hHBxA033KJ1urCQFNvAoKz28Z/tzssSyBt73ekNIdATSl1TalzhOZo6tYciSR2efG4D/rGIlp7gag4aoyS/CBOJplLLVtBWKLcEZSzoDI0yzd334Ll5H4HwsrzERRSEoN1L9OP5OKEveGifN3FSJHlxa1gd7r283FXoalGIHivz+Zg97wat9dlOg5Z/IGiA8MWwGxOh9i3K/PkH0a12ADOybW2uUzfS29/vXHsWLuGdsF4WXUEUz3UnMdfcGw0c42CruyFSaW6G+Hep1RtTahfVpqt6f1DUR2kvczxzxkkXnlOXnHlhR6lKSOLTwxTSjvWCpEWUWmSkgVhN+uremjBRZJ1s/dyYPxGLmliFD2V8j75KEEDq6NO0oNIvia4q7w5htvCyVwQBNOTj40U5Ks+HIPc=
    on_success: always
